<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>خونه سوسیس | بهترین سوسیس، ژامبون و فرآورده‌های گوشتی در ایران</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="خونه سوسیس - تولیدکننده بهترین سوسیس، ژامبون و فرآورده‌های گوشتی با کیفیت بالا. ارسال رایگان به سراسر کشور. 15 سال تجربه در تولید محصولات پروتئینی.">
    <meta name="keywords" content="سوسیس, ژامبون, فرآورده گوشتی, خونه سوسیس, سوسیس آلمانی, ژامبون مرغ, برگر, ناگت, کوکتل, فلافل">
    <meta name="author" content="مرضیه حیدری - خونه سوسیس">
    <meta name="robots" content="index, follow">
    <meta name="language" content="Persian">
    <meta name="revisit-after" content="7 days">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="خونه سوسیس | بهترین سوسیس و ژامبون در ایران">
    <meta property="og:description" content="تولیدکننده بهترین سوسیس، ژامبون و فرآورده‌های گوشتی با کیفیت بالا. ارسال رایگان به سراسر کشور.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://sausage-house.com">
    <meta property="og:image" content="https://sausage-house.com/og-image.jpg">
    <meta property="og:locale" content="fa_IR">
    <meta property="og:site_name" content="خونه سوسیس">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="خونه سوسیس | بهترین سوسیس و ژامبون در ایران">
    <meta name="twitter:description" content="تولیدکننده بهترین سوسیس، ژامبون و فرآورده‌های گوشتی با کیفیت بالا. ارسال رایگان به سراسر کشور.">
    <meta name="twitter:image" content="https://sausage-house.com/twitter-image.jpg">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🏠</text></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🏠</text></svg>">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://sausage-house.com">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "LocalBusiness",
        "name": "خونه سوسیس",
        "description": "تولیدکننده بهترین سوسیس، ژامبون و فرآورده‌های گوشتی با کیفیت بالا",
        "founder": {
            "@type": "Person",
            "name": "مرضیه حیدری"
        },
        "foundingDate": "2009",
        "address": {
            "@type": "PostalAddress",
            "addressLocality": "تهران",
            "addressCountry": "IR"
        },
        "telephone": "+98-915-715-7629",
        "url": "https://sausage-house.com",
        "sameAs": [
            "https://instagram.com/sausage_house",
            "https://t.me/sausage_house"
        ],
        "hasOfferCatalog": {
            "@type": "OfferCatalog",
            "name": "محصولات خونه سوسیس",
            "itemListElement": [
                {
                    "@type": "Offer",
                    "itemOffered": {
                        "@type": "Product",
                        "name": "سوسیس آلمانی",
                        "category": "فرآورده گوشتی"
                    }
                },
                {
                    "@type": "Offer",
                    "itemOffered": {
                        "@type": "Product",
                        "name": "ژامبون مرغ",
                        "category": "فرآورده گوشتی"
                    }
                }
            ]
        }
    }
    </script>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    

    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700;800;900&display=swap');
        
        * {
            font-family: 'Vazirmatn', sans-serif;
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        input, textarea {
            -webkit-user-select: text;
            -khtml-user-select: text;
            -moz-user-select: text;
            -ms-user-select: text;
            user-select: text;
        }
        
        button, .btn-primary, .btn-secondary, .filter-btn, .contact-btn, .social-btn {
            cursor: pointer;
            -webkit-tap-highlight-color: rgba(0,0,0,0.1);
            touch-action: manipulation;
        }
        
        .gradient-primary {
            background: linear-gradient(135deg, #dc2626 0%, #991b1b 50%, #1e40af 100%);
        }
        
        .gradient-secondary {
            background: linear-gradient(45deg, #f8fafc 0%, #e2e8f0 100%);
        }
        
        .glass-effect {
            backdrop-filter: blur(20px);
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .product-card {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.98);
            border: 1px solid rgba(0, 0, 0, 0.05);
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        
        .product-card:hover,
        .product-card:active {
            transform: translateY(-12px) scale(1.02);
            box-shadow: 0 25px 50px rgba(220, 38, 38, 0.25);
            border-color: rgba(220, 38, 38, 0.3);
        }
        

        
        .hero-pattern {
            background-image: 
                radial-gradient(circle at 25% 25%, rgba(220, 38, 38, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(30, 64, 175, 0.1) 0%, transparent 50%),
                linear-gradient(45deg, transparent 40%, rgba(255, 255, 255, 0.1) 50%, transparent 60%);
        }
        
        .mobile-menu {
            transform: translateX(100%);
            transition: transform 0.3s ease-in-out;
        }
        
        .mobile-menu.active {
            transform: translateX(0);
        }
        
        .stats-counter {
            animation: countUp 2s ease-out;
        }
        
        @keyframes countUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .feature-icon {
            background: linear-gradient(135deg, #dc2626, #1e40af);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #dc2626, #991b1b);
            transition: all 0.3s ease;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            min-height: 44px;
            border: none;
            outline: none;
        }
        
        .btn-primary:hover,
        .btn-primary:active,
        .btn-primary:focus {
            background: linear-gradient(135deg, #991b1b, #7f1d1d);
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(220, 38, 38, 0.4);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #1e40af, #1e3a8a);
            transition: all 0.3s ease;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            min-height: 44px;
            border: none;
            outline: none;
        }
        
        .btn-secondary:hover,
        .btn-secondary:active,
        .btn-secondary:focus {
            background: linear-gradient(135deg, #1e3a8a, #1e3a8a);
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(30, 64, 175, 0.4);
        }
        
        .cart-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #dc2626;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1001;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .firebase-status {
            display: none !important;
        }
        
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.5rem !important;
                line-height: 1.2 !important;
            }
            
            .product-card:hover,
            .product-card:active {
                transform: translateY(-6px) scale(1.01);
            }
            
            .container {
                padding-left: 1rem;
                padding-right: 1rem;
            }
            
            .glass-effect {
                backdrop-filter: blur(10px);
            }
            
            .btn-primary,
            .btn-secondary {
                min-height: 48px;
                font-size: 1rem;
            }
            
            input, textarea, button {
                font-size: 16px; /* Prevents zoom on iOS */
            }
        }
        
        @media (max-width: 480px) {
            .hero-title {
                font-size: 2rem !important;
            }
            
            .text-4xl {
                font-size: 1.875rem !important;
            }
            
            .text-3xl {
                font-size: 1.5rem !important;
            }
            
            .px-8 {
                padding-left: 1rem !important;
                padding-right: 1rem !important;
            }
            
            .py-4 {
                padding-top: 0.75rem !important;
                padding-bottom: 0.75rem !important;
            }
        }
        
        .loading-spinner {
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .sync-indicator {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 20px;
            border-radius: 10px;
            z-index: 2000;
            display: none;
        }
    </style>
</head>
<body class="bg-gray-50 overflow-x-hidden">
    <!-- Loading Screen -->
    <div id="loadingScreen" class="fixed inset-0 bg-white z-50 flex items-center justify-center">
        <div class="text-center">
            <div class="loading-spinner w-16 h-16 border-4 border-red-200 border-t-red-600 rounded-full mx-auto mb-4"></div>
            <p class="text-gray-600 font-medium">در حال بارگذاری محصولات...</p>
        </div>
    </div>



    <!-- Sync Indicator -->
    <div id="syncIndicator" class="sync-indicator">
        <div class="flex items-center gap-3">
            <div class="loading-spinner w-6 h-6 border-2 border-white border-t-transparent rounded-full"></div>
            <span>در حال همگام‌سازی...</span>
        </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg">
        <div class="flex items-center gap-2">
            <i class="fas fa-check-circle"></i>
            <span id="notificationText">محصول به سبد خرید اضافه شد!</span>
        </div>
    </div>



    <!-- Shopping Cart -->
    <div class="fixed bottom-6 left-6 z-50">
        <button id="cartBtn" class="relative bg-blue-600 hover:bg-blue-700 text-white w-16 h-16 rounded-full shadow-2xl transition-all duration-300 flex items-center justify-center">
            <i class="fas fa-shopping-cart text-xl"></i>
            <span id="cartBadge" class="cart-badge hidden">0</span>
        </button>
    </div>

    <!-- Install App Button -->
    <div id="installAppBtn" class="fixed bottom-6 right-6 z-50 hidden">
        <button class="bg-green-600 hover:bg-green-700 text-white px-4 py-3 rounded-full shadow-2xl transition-all duration-300 flex items-center gap-2 font-bold">
            <i class="fas fa-download text-lg"></i>
            <span class="hidden sm:inline">نصب اپلیکیشن</span>
        </button>
    </div>

    <!-- Mobile Menu Overlay -->
    <div id="mobileMenuOverlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden lg:hidden"></div>

    <!-- Header -->
    <header class="gradient-primary text-white relative overflow-hidden">
        <div class="hero-pattern absolute inset-0"></div>
        <div class="relative z-10">
            <!-- Navigation -->
            <nav class="glass-effect bg-white/10 backdrop-blur-md">
                <div class="container mx-auto px-4">
                    <div class="flex items-center justify-between py-4">
                        <!-- Logo -->
                        <div class="flex items-center gap-3">
                            <div class="w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center">
                                <i class="fas fa-drumstick-bite text-2xl"></i>
                            </div>
                            <div class="hidden sm:block">
                                <h1 class="text-xl font-bold">خونه سوسیس</h1>
                                <p class="text-sm opacity-80">کیفیت برتر</p>
                            </div>
                        </div>

                        <!-- Desktop Menu -->
                        <div class="hidden lg:flex items-center space-x-8 space-x-reverse">
                            <a href="#" class="nav-link hover:text-red-200 transition-colors font-medium flex items-center gap-2">
                                <i class="fas fa-home"></i>
                                خانه
                            </a>
                            <a href="#products" class="nav-link hover:text-red-200 transition-colors font-medium flex items-center gap-2">
                                <i class="fas fa-box"></i>
                                محصولات
                            </a>
                            <a href="#features" class="nav-link hover:text-red-200 transition-colors font-medium flex items-center gap-2">
                                <i class="fas fa-star"></i>
                                ویژگی‌ها
                            </a>
                            <a href="#about" class="nav-link hover:text-red-200 transition-colors font-medium flex items-center gap-2">
                                <i class="fas fa-user"></i>
                                درباره ما
                            </a>
                        </div>

                        <!-- Mobile Menu Button -->
                        <button id="mobileMenuBtn" class="lg:hidden p-2 rounded-lg bg-white/20">
                            <i class="fas fa-bars text-xl"></i>
                        </button>
                    </div>
                </div>
            </nav>

            <!-- Hero Section -->
            <div class="container mx-auto px-4 py-16 lg:py-24">
                <div class="text-center max-w-4xl mx-auto">
                    <h1 class="hero-title text-4xl lg:text-6xl font-black mb-6 drop-shadow-2xl leading-tight">
                        🏠 خونه سوسیس
                    </h1>
                    <p class="text-xl lg:text-2xl opacity-95 mb-8 leading-relaxed">
                        بهترین کیفیت، بهترین طعم، بهترین قیمت در سراسر کشور
                    </p>
                    <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
                        <button id="viewProductsBtn" class="btn-primary text-white px-8 py-4 rounded-xl text-lg font-bold shadow-2xl w-full sm:w-auto">
                            <i class="fas fa-shopping-cart ml-2"></i>
                            مشاهده محصولات
                        </button>
                        <button id="aboutUsBtn" class="btn-secondary text-white px-8 py-4 rounded-xl text-lg font-bold shadow-2xl w-full sm:w-auto">
                            <i class="fas fa-user ml-2"></i>
                            درباره ما
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Mobile Menu -->
    <div id="mobileMenu" class="mobile-menu fixed top-0 right-0 h-full w-80 bg-white shadow-2xl z-50 lg:hidden">
        <div class="p-6">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-xl font-bold text-gray-800">منو</h2>
                <button id="closeMobileMenu" class="p-2 text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <nav class="space-y-4">
                <a href="#" class="mobile-nav-link flex items-center gap-3 p-3 rounded-lg hover:bg-gray-100 transition-colors">
                    <i class="fas fa-home text-red-600"></i>
                    <span class="font-medium">خانه</span>
                </a>
                <a href="#products" class="mobile-nav-link flex items-center gap-3 p-3 rounded-lg hover:bg-gray-100 transition-colors">
                    <i class="fas fa-box text-red-600"></i>
                    <span class="font-medium">محصولات</span>
                </a>
                <a href="#features" class="mobile-nav-link flex items-center gap-3 p-3 rounded-lg hover:bg-gray-100 transition-colors">
                    <i class="fas fa-star text-red-600"></i>
                    <span class="font-medium">ویژگی‌ها</span>
                </a>
                <a href="#about" class="mobile-nav-link flex items-center gap-3 p-3 rounded-lg hover:bg-gray-100 transition-colors">
                    <i class="fas fa-user text-red-600"></i>
                    <span class="font-medium">درباره ما</span>
                </a>
            </nav>
        </div>
    </div>

    <!-- Stats Section -->
    <section class="py-16 bg-white">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <div class="text-center">
                    <div class="stats-counter text-4xl lg:text-5xl font-black text-red-600 mb-2">1000+</div>
                    <p class="text-gray-600 font-medium">مشتری راضی</p>
                </div>
                <div class="text-center">
                    <div class="stats-counter text-4xl lg:text-5xl font-black text-blue-600 mb-2">محصولات پروتئینی</div>
                    <p class="text-gray-600 font-medium">نوع محصول</p>
                </div>
                <div class="text-center">
                    <div class="stats-counter text-4xl lg:text-5xl font-black text-red-600 mb-2">100%</div>
                    <p class="text-gray-600 font-medium">کیفیت تضمینی</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section id="features" class="py-16 gradient-secondary">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-3xl lg:text-4xl font-black text-gray-800 mb-4">چرا ما را انتخاب کنید؟</h2>
                <p class="text-xl text-gray-600 max-w-2xl mx-auto">ویژگی‌های منحصر به فرد که ما را از سایرین متمایز می‌کند</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="glass-effect p-8 rounded-2xl text-center shadow-xl">
                    <div class="feature-icon text-5xl mb-4">
                        <i class="fas fa-certificate"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800 mb-3">کیفیت تضمینی</h3>
                    <p class="text-gray-600">تمامی محصولات از گوشت های تازه و با کیفیت تولید می شود</p>
                </div>
                
                <div class="glass-effect p-8 rounded-2xl text-center shadow-xl">
                    <div class="feature-icon text-5xl mb-4">
                        <i class="fas fa-shipping-fast"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800 mb-3">ارسال سریع</h3>
                    <p class="text-gray-600">ارسال رایگان در کمتر از 48 ساعت به سراسر تهران</p>
                </div>
                
                <div class="glass-effect p-8 rounded-2xl text-center shadow-xl">
                    <div class="feature-icon text-5xl mb-4">
                        <i class="fas fa-award"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800 mb-3">تجربه 8 ساله</h3>
                    <p class="text-gray-600">بیش از 8 سال تجربه در تولید فرآورده‌های گوشتی</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Products Section -->
    <section id="products" class="py-16 bg-white">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-3xl lg:text-4xl font-black text-gray-800 mb-4">محصولات خونه سوسیس</h2>
                <p class="text-xl text-gray-600 max-w-2xl mx-auto">بهترین سوسیس، ژامبون و فرآورده‌های گوشتی با کیفیت بی‌نظیر</p>
            </div>
            
            <!-- Filter Buttons -->
            <div class="flex flex-wrap justify-center gap-4 mb-12">
                <button class="filter-btn active bg-red-600 text-white px-6 py-3 rounded-xl font-medium transition-all" data-filter="all">
                    همه محصولات
                </button>
                <button class="filter-btn bg-gray-200 text-gray-700 hover:bg-red-600 hover:text-white px-6 py-3 rounded-xl font-medium transition-all" data-filter="sausage">
                    سوسیس
                </button>
                <button class="filter-btn bg-gray-200 text-gray-700 hover:bg-red-600 hover:text-white px-6 py-3 rounded-xl font-medium transition-all" data-filter="ham">
                    ژامبون
                </button>
                <button class="filter-btn bg-gray-200 text-gray-700 hover:bg-red-600 hover:text-white px-6 py-3 rounded-xl font-medium transition-all" data-filter="processed">
                    فرآورده‌ها
                </button>
            </div>
            
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6" id="productsGrid">
                <!-- Products will be loaded here -->
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="py-16 gradient-primary text-white">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-3xl lg:text-4xl font-black mb-4">درباره ما</h2>
                <p class="text-xl opacity-90 max-w-2xl mx-auto">آشنایی با بنیان‌گذار و تیم خونه سوسیس</p>
            </div>
            
            <div class="max-w-4xl mx-auto">
                <!-- Owner Profile -->
                <div class="glass-effect bg-white/10 p-8 lg:p-12 rounded-3xl text-center mb-8">
                    <div class="w-32 h-32 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-6">
                        <i class="fas fa-user-tie text-6xl text-white"></i>
                    </div>
                    
                    <div class="space-y-6 text-lg leading-relaxed">
                        <p class="font-bold text-2xl text-yellow-300 mb-4">👋 سلام، مرضیه حیدری هستم</p>
                        
                        <p>متولد سال ۱۳۶۸ که <span class="font-bold text-yellow-300">هشت سال سابقه تولید و آموزش</span> انواع محصولات پروتئینی دارم.</p>
                        
                        <p>دارای <span class="font-bold text-yellow-300">مدرک تخصصی بین‌المللی خط تولید سوسیس و کالباس</span> و تقدیرنامه سازمان فنی حرفه‌ای به عنوان <span class="font-bold text-yellow-300">کارآفرین</span> هستم.</p>
                        
                        <p>در حال حاضر با <span class="font-bold text-yellow-300">۵ نفر نیروی کار</span> مجموعه خونه سوسیس را اداره می‌کنم.</p>
                        
                        <p>با <span class="font-bold text-yellow-300">بهترین دستور عمل و مواد اولیه</span> و با <span class="font-bold text-yellow-300">عشق فراوان</span> به تولید فراورده‌های پروتئینی می‌پردازم.</p>
                        
                        <p class="text-2xl font-bold text-yellow-300 pt-4">ممنون از اعتماد و حمایت شما دوست عزیز 🙏🏻</p>
                    </div>
                </div>
                
                <!-- Contact Info -->
                <div class="grid grid-cols-1 gap-6">
                    <div class="glass-effect bg-white/10 p-6 rounded-2xl text-center">
                        <i class="fas fa-map-marker-alt text-3xl mb-3"></i>
                        <h3 class="text-lg font-bold mb-2">محل تولید</h3>
                        <p class="opacity-90 text-sm">تهران</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-12">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                <div>
                    <div class="flex items-center gap-3 mb-4">
                        <div class="w-10 h-10 bg-red-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-home"></i>
                        </div>
                        <h3 class="text-xl font-bold">خونه سوسیس</h3>
                    </div>
                    <p class="text-gray-300 leading-relaxed">ارائه‌دهنده بهترین سوسیس، ژامبون و فرآورده‌های گوشتی با کیفیت بالا</p>
                </div>
                
                <div>
                    <h3 class="text-xl font-bold mb-4">لینک‌های مفید</h3>
                    <ul class="space-y-3 text-gray-300">
                        <li><a href="#" class="footer-link hover:text-red-400 transition-colors flex items-center gap-2">
                            <i class="fas fa-chevron-left text-xs"></i>
                            درباره ما
                        </a></li>
                        <li><a href="#products" class="footer-link hover:text-red-400 transition-colors flex items-center gap-2">
                            <i class="fas fa-chevron-left text-xs"></i>
                            محصولات
                        </a></li>
                        <li><a href="#about" class="footer-link hover:text-red-400 transition-colors flex items-center gap-2">
                            <i class="fas fa-chevron-left text-xs"></i>
                            درباره ما
                        </a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-xl font-bold mb-4">خدمات</h3>
                    <ul class="space-y-3 text-gray-300">
                        <li class="flex items-center gap-2">
                            <i class="fas fa-check text-green-400 text-xs"></i>
                            ارسال رایگان
                        </li>
                        <li class="flex items-center gap-2">
                            <i class="fas fa-check text-green-400 text-xs"></i>
                            ضمانت کیفیت
                        </li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-xl font-bold mb-4">شبکه‌های اجتماعی</h3>
                    <div class="flex gap-4">
                        <button class="social-btn w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center hover:bg-blue-700 transition-colors" data-social="telegram">
                            <i class="fab fa-telegram"></i>
                        </button>
                        <button class="social-btn w-10 h-10 bg-pink-600 rounded-lg flex items-center justify-center hover:bg-pink-700 transition-colors" data-social="instagram">
                            <i class="fab fa-instagram"></i>
                        </button>
                        <button class="social-btn w-10 h-10 bg-green-600 rounded-lg flex items-center justify-center hover:bg-green-700 transition-colors" data-social="whatsapp">
                            <i class="fab fa-whatsapp"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-400">
                <p>&copy; 2024 خونه سوسیس. تمامی حقوق محفوظ است.</p>
            </div>
        </div>
    </footer>





    <!-- Cart Modal -->
    <div id="cartModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4">
        <div class="glass-effect bg-white rounded-2xl p-6 w-full max-w-2xl mx-4 shadow-2xl max-h-[80vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-2xl font-bold text-gray-800">سبد خرید</h3>
                <button id="closeCartModal" class="text-gray-500 hover:text-gray-700 text-2xl">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div id="cartItems" class="space-y-4 mb-6">
                <!-- Cart items will be populated here -->
            </div>
            
            <div class="border-t pt-4">
                <div class="flex justify-between items-center mb-4">
                    <span class="text-xl font-bold">مجموع:</span>
                    <span id="cartTotal" class="text-2xl font-black text-red-600">0 تومان</span>
                </div>
                <div class="flex gap-4">
                    <button id="checkoutBtn" class="flex-1 btn-primary text-white py-3 rounded-xl font-bold">
                        <i class="fas fa-credit-card ml-2"></i>
                        تسویه حساب
                    </button>
                    <button id="clearCartBtn" class="bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-xl font-bold">
                        <i class="fas fa-trash ml-2"></i>
                        پاک کردن
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Customer Order Form Modal -->
    <div id="orderFormModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4">
        <div class="glass-effect bg-white rounded-2xl p-6 w-full max-w-lg mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-2xl font-bold text-gray-800">🛒 تکمیل سفارش</h3>
                <button id="closeOrderForm" class="text-gray-500 hover:text-gray-700 text-2xl">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <form id="customerOrderForm" class="space-y-4">
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-2">
                        <i class="fas fa-user text-blue-600 ml-1"></i>
                        نام و نام خانوادگی *
                    </label>
                    <input type="text" id="customerName" required 
                           class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 font-medium"
                           style="font-size: 16px; -webkit-appearance: none;"
                           placeholder="مثال: علی احمدی">
                </div>
                
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-2">
                        <i class="fas fa-phone text-green-600 ml-1"></i>
                        شماره تلفن *
                    </label>
                    <input type="tel" id="customerPhone" required 
                           class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 font-medium"
                           style="font-size: 16px; -webkit-appearance: none;"
                           inputmode="numeric"
                           pattern="[0-9]*"
                           placeholder="09123456789">
                </div>
                
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-2">
                        <i class="fas fa-map-marker-alt text-red-600 ml-1"></i>
                        آدرس تحویل *
                    </label>
                    <textarea id="customerAddress" required rows="3"
                              class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 font-medium resize-none"
                              style="font-size: 16px; -webkit-appearance: none;"
                              placeholder="آدرس کامل برای تحویل سفارش..."></textarea>
                </div>
                
                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-2">
                        <i class="fas fa-comment text-purple-600 ml-1"></i>
                        توضیحات اضافی (اختیاری)
                    </label>
                    <textarea id="customerNotes" rows="2"
                              class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 font-medium resize-none"
                              style="font-size: 16px; -webkit-appearance: none;"
                              placeholder="توضیحات خاص، زمان تحویل مطلوب و..."></textarea>
                </div>
                
                <!-- Order Summary -->
                <div class="bg-gray-50 rounded-xl p-4 border">
                    <h4 class="font-bold text-gray-800 mb-3 flex items-center gap-2">
                        <i class="fas fa-receipt text-blue-600"></i>
                        خلاصه سفارش
                    </h4>
                    <div id="orderSummary" class="space-y-2 text-sm">
                        <!-- Order items will be populated here -->
                    </div>
                    <div class="border-t mt-3 pt-3 flex justify-between items-center">
                        <span class="font-bold text-gray-800">مجموع کل:</span>
                        <span id="orderTotalAmount" class="text-xl font-black text-red-600">0 تومان</span>
                    </div>
                </div>
                
                <div class="flex gap-4 pt-4">
                    <button type="button" id="cancelOrder" class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-3 rounded-xl font-bold">
                        انصراف
                    </button>
                    <button type="submit" class="flex-1 btn-primary text-white py-3 rounded-xl font-bold">
                        <i class="fas fa-paper-plane ml-2"></i>
                        ارسال سفارش
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Order Success Modal -->
    <div id="orderSuccessModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4">
        <div class="glass-effect bg-white rounded-2xl p-8 w-full max-w-md mx-4 shadow-2xl text-center">
            <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6">
                <i class="fas fa-check text-3xl text-green-600"></i>
            </div>
            <h3 class="text-2xl font-bold text-gray-800 mb-4">سفارش ثبت شد! 🎉</h3>
            <div class="bg-green-50 rounded-xl p-4 mb-6 border border-green-200">
                <p class="text-green-800 font-medium mb-2">شماره سفارش شما:</p>
                <p id="orderNumber" class="text-2xl font-black text-green-600">#12345</p>
            </div>
            <div class="bg-green-50 rounded-xl p-4 mb-6 border border-green-200">
                <p class="text-green-800 font-medium text-sm leading-relaxed">
                    ✅ سفارش شما ثبت و ارسال شد!<br>
                    📱 سفارش به صورت خودکار به تلگرام شما ارسال شد<br>
                    📞 کارشناسان ما تا 30 دقیقه آینده با شما تماس خواهند گرفت<br>
                    🚚 زمان تحویل: 24 ساعت آینده<br>
                    💬 برای پیگیری: 09157157629
                </p>
            </div>
            <div class="space-y-3">
                <button id="viewOrderDetails" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-xl font-bold">
                    <i class="fas fa-eye ml-2"></i>
                    مشاهده جزئیات سفارش
                </button>
                <button id="closeOrderSuccess" class="w-full bg-gray-300 hover:bg-gray-400 text-gray-700 py-3 rounded-xl font-bold">
                    بستن
                </button>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let products = [];
        let editMode = false;
        let currentEditId = null;
        let currentFilter = 'all';
        let cart = [];
        let firebaseConnected = false;
        let deferredPrompt;

        // Local Storage Keys
        const STORAGE_KEYS = {
            PRODUCTS: 'sausage_house_products',
            CART: 'sausage_house_cart',
            FILTER: 'sausage_house_filter',
            LAST_UPDATE: 'sausage_house_last_update'
        };

        // Default products data
        const defaultProducts = [
            { id: 1, name: 'ژامبون گوشت و مرغ', price: 297000, emoji: '🥓', category: 'ham', image: 'images/InShot_20250728_152500454.jpg' },
            { id: 2, name: 'ژامبون مرغ', price: 267000, emoji: '🍖', category: 'ham', image: 'images/1.jpg' },
            { id: 3, name: 'ژامبون بوقلمون', price: 317000, emoji: '🦃', category: 'ham', image: 'images/3888CFF0-6E19-435A-942A-0C2BDF8652AE-720x470-1.jpg' },
            { id: 4, name: 'ژامبون لوکس', price: 377000, emoji: '👑', category: 'ham', image: 'images/IMG_20250728_151740_863.jpg' },
            { id: 5, name: 'سوسیس آلمانی', price: 207000, emoji: '🌭', category: 'sausage', image: 'images/-2147483648_-210150.jpg' },
            { id: 6, name: 'سوسیس هاتداگ', price: 257000, emoji: '🌭', category: 'sausage', image: 'images/-2147483648_-210148.jpg' },
            { id: 7, name: 'سوسیس بوقلمون', price: 267000, emoji: '🌭', category: 'sausage', image: 'images/-2147483648_-210166.jpg' },
            { id: 8, name: 'سوسیس مرغ', price: 227000, emoji: '🌭', category: 'sausage', image: 'images/vienna-sausages-on-a-wooden-board.jpg' },
            { id: 9, name: 'کوکتل پنیری', price: 247000, emoji: '🧀', category: 'processed', image: 'images/-2147483648_-210152.jpg' },
            { id: 10, name: 'کباب لقمه مرغ - 4عددی', price: 187000, emoji: '🍢', category: 'processed', image: 'images/3.jpg' },
            { id: 11, name: 'برگر مرغ - 5عددی', price: 237000, emoji: '🍔', category: 'processed', image: 'images/about.jpg' },
            { id: 12, name: 'برگر گوشت - 5عددی', price: 377000, emoji: '🍔', category: 'processed', image: 'images/about (2).jpg' },
            { id: 13, name: 'ناگت', price: 237000, emoji: '🍗', category: 'processed', image: 'images/6.jpg' },
            { id: 14, name: 'فلافل', price: 107000, emoji: '🧆', category: 'processed', image: 'images/7.jpg' },
            { id: 15, name: 'شنیسل مرغ', price: 187000, emoji: '🍗', category: 'processed', image: 'images/8.jpg' }
        ];

        // Local Storage Functions
        function saveToLocalStorage(key, data) {
            try {
                localStorage.setItem(key, JSON.stringify(data));
                return true;
            } catch (error) {
                console.error('Error saving to localStorage:', error);
                return false;
            }
        }

        function loadFromLocalStorage(key, defaultValue = null) {
            try {
                const data = localStorage.getItem(key);
                return data ? JSON.parse(data) : defaultValue;
            } catch (error) {
                console.error('Error loading from localStorage:', error);
                return defaultValue;
            }
        }

        function clearLocalStorage() {
            try {
                Object.values(STORAGE_KEYS).forEach(key => {
                    localStorage.removeItem(key);
                });
                showNotification('تمام داده‌های محلی پاک شد!');
            } catch (error) {
                console.error('Error clearing localStorage:', error);
            }
        }

        function saveProductsToLocal() {
            const success = saveToLocalStorage(STORAGE_KEYS.PRODUCTS, {
                products: products,
                timestamp: Date.now()
            });
            if (success) {
                console.log('Products saved to localStorage');
            }
        }

        function loadProductsFromLocal() {
            const data = loadFromLocalStorage(STORAGE_KEYS.PRODUCTS);
            if (data && data.products && Array.isArray(data.products)) {
                products = data.products;
                console.log('Products loaded from localStorage');
                return true;
            }
            return false;
        }

        function saveCartToLocal() {
            saveToLocalStorage(STORAGE_KEYS.CART, cart);
        }

        function loadCartFromLocal() {
            const savedCart = loadFromLocalStorage(STORAGE_KEYS.CART, []);
            if (Array.isArray(savedCart)) {
                cart = savedCart;
                updateCartBadge();
            }
        }

        function saveFilterToLocal() {
            saveToLocalStorage(STORAGE_KEYS.FILTER, currentFilter);
        }

        function loadFilterFromLocal() {
            const savedFilter = loadFromLocalStorage(STORAGE_KEYS.FILTER, 'all');
            currentFilter = savedFilter;
            
            // Update filter buttons
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active', 'bg-red-600', 'text-white');
                btn.classList.add('bg-gray-200', 'text-gray-700');
                
                if (btn.dataset.filter === currentFilter) {
                    btn.classList.add('active', 'bg-red-600', 'text-white');
                    btn.classList.remove('bg-gray-200', 'text-gray-700');
                }
            });
        }

        // Initialize app
        function initializeApp() {
            try {
                console.log('Starting app initialization...');
                
                // Set default products
                products = defaultProducts.slice();
                
                // Load saved data
                loadCartFromLocal();
                loadFilterFromLocal();
                
                // Render UI
                renderProducts();
                setupEventListeners();
                
                // Hide loading
                const loadingScreen = document.getElementById('loadingScreen');
                if (loadingScreen) {
                    loadingScreen.style.display = 'none';
                }
                
                console.log('App initialized successfully!');
            } catch (error) {
                console.error('Initialization error:', error);
                // Hide loading even on error
                const loadingScreen = document.getElementById('loadingScreen');
                if (loadingScreen) {
                    loadingScreen.style.display = 'none';
                }
            }
        }

        // Firebase functions (disabled for faster loading)
        function initializeFirebase() {
            console.log('Firebase disabled for faster loading');
            updateFirebaseStatus('disconnected', 'آفلاین');
        }

        function loadProductsFromFirebase() {
            if (!window.firebaseDB) return;
            
            const productsRef = window.firebaseDB.ref(window.firebaseDB.database, 'products');
            
            window.firebaseDB.get(productsRef).then((snapshot) => {
                if (snapshot.exists()) {
                    const data = snapshot.val();
                    const firebaseProducts = Object.keys(data).map(key => ({
                        id: parseInt(key),
                        ...data[key]
                    }));
                    
                    // Update products and save to localStorage
                    products = firebaseProducts;
                    saveProductsToLocal();
                    renderProducts();
                } else {
                    // Initialize Firebase with current products
                    saveProductsToFirebase();
                }
            }).catch((error) => {
                console.error('Error loading products:', error);
                showNotification('خطا در بارگذاری از سرور، از داده‌های محلی استفاده می‌شود', 'error');
            });
        }

        function saveProductsToFirebase() {
            // Always save to localStorage first (immediate backup)
            saveProductsToLocal();
            
            if (!window.firebaseDB || !firebaseConnected) {
                console.log('Firebase not available, data saved locally only');
                return Promise.resolve();
            }
            
            showSyncIndicator();
            
            const productsRef = window.firebaseDB.ref(window.firebaseDB.database, 'products');
            const productsData = {};
            
            products.forEach(product => {
                productsData[product.id] = {
                    name: product.name,
                    price: product.price,
                    emoji: product.emoji,
                    category: product.category
                };
            });
            
            return window.firebaseDB.set(productsRef, productsData).then(() => {
                hideSyncIndicator();
                console.log('Products saved to Firebase successfully');
                return true;
            }).catch((error) => {
                hideSyncIndicator();
                console.error('Error saving products to Firebase:', error);
                
                // Update Firebase status to show disconnection
                updateFirebaseStatus('disconnected', 'خطا در ذخیره‌سازی');
                firebaseConnected = false;
                
                // Data is already saved locally, so this is not critical
                throw error;
            });
        }

        function setupRealtimeListeners() {
            if (!window.firebaseDB) return;
            
            const productsRef = window.firebaseDB.ref(window.firebaseDB.database, 'products');
            
            window.firebaseDB.onValue(productsRef, (snapshot) => {
                // Skip updates if we're currently editing
                if (isEditing || currentEditElement) {
                    console.log('Skipping Firebase update - editing in progress');
                    return;
                }
                
                if (snapshot.exists()) {
                    const data = snapshot.val();
                    const newProducts = Object.keys(data).map(key => ({
                        id: parseInt(key),
                        ...data[key]
                    }));
                    
                    // Only update if products have actually changed
                    const currentProductsString = JSON.stringify(products.sort((a, b) => a.id - b.id));
                    const newProductsString = JSON.stringify(newProducts.sort((a, b) => a.id - b.id));
                    
                    if (currentProductsString !== newProductsString) {
                        console.log('Products updated from Firebase');
                        products = newProducts;
                        saveProductsToLocal(); // Always keep localStorage in sync
                        renderProducts();
                        
                        // Update admin panel if it's open
                        const adminModal = document.getElementById('adminPanelModal');
                        if (!adminModal.classList.contains('hidden')) {
                            renderAdminProducts();
                        }
                        
                        showNotification('محصولات از سرور به‌روزرسانی شد! 🔄');
                    }
                }
            }, (error) => {
                console.error('Firebase listener error:', error);
                updateFirebaseStatus('disconnected', 'خطا در اتصال');
                firebaseConnected = false;
            });
        }

        function updateFirebaseStatus(status, text) {
            const statusElement = document.getElementById('firebaseStatus');
            statusElement.className = `firebase-status firebase-${status}`;
            statusElement.innerHTML = `<i class="fas fa-circle text-xs mr-1"></i>${text}`;
            
            // Update admin panel status if it exists
            const adminStatus = document.getElementById('firebaseStorageStatus');
            if (adminStatus) {
                const icon = adminStatus.querySelector('i');
                const span = adminStatus.querySelector('span');
                
                if (status === 'connected') {
                    icon.className = 'fas fa-cloud text-green-600';
                    span.className = 'text-green-600 font-medium';
                    span.textContent = 'سرور: متصل';
                } else if (status === 'loading') {
                    icon.className = 'fas fa-cloud text-yellow-600';
                    span.className = 'text-yellow-600 font-medium';
                    span.textContent = 'سرور: در حال اتصال...';
                } else {
                    icon.className = 'fas fa-cloud text-red-600';
                    span.className = 'text-red-600 font-medium';
                    span.textContent = 'سرور: قطع';
                }
            }
        }

        function showSyncIndicator() {
            document.getElementById('syncIndicator').style.display = 'block';
        }

        function hideSyncIndicator() {
            document.getElementById('syncIndicator').style.display = 'none';
        }

        // Utility functions
        function formatPrice(price) {
            return price.toLocaleString('fa-IR');
        }

        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notificationText');
            
            notificationText.textContent = message;
            notification.className = `notification ${type === 'success' ? 'bg-green-500' : 'bg-red-500'} text-white px-6 py-3 rounded-lg shadow-lg show`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        function hideLoadingScreen() {
            const loadingScreen = document.getElementById('loadingScreen');
            if (loadingScreen) {
                loadingScreen.style.display = 'none';
            }
        }

        // Product functions
        function filterProducts(category) {
            return category === 'all' ? products : products.filter(p => p.category === category);
        }

        function renderProducts() {
            console.log('Rendering products...');
            const grid = document.getElementById('productsGrid');
            const filteredProducts = filterProducts(currentFilter);
            
            console.log('Filtered products:', filteredProducts.length);
            
            if (filteredProducts.length === 0) {
                grid.innerHTML = '<div class="col-span-full text-center py-12"><p class="text-gray-500 text-xl">محصولی یافت نشد</p></div>';
                return;
            }
            
            // Update SEO when products are rendered
            updatePageTitle();
            updateMetaDescription();
            
            grid.innerHTML = filteredProducts.map(product => `
                <div class="product-card rounded-2xl shadow-xl overflow-hidden">
                    <div class="w-full h-48 bg-gradient-to-br from-red-100 to-blue-100 flex items-center justify-center overflow-hidden rounded-t-2xl relative">
                        ${product.image ? 
                            `<img src="${product.image}" alt="${product.name}" class="w-full h-full object-cover" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                             <div class="text-6xl absolute inset-0 flex items-center justify-center" style="display: none;">${product.emoji}</div>` 
                            : 
                            `<div class="text-6xl">${product.emoji}</div>`
                        }
                    </div>
                    <div class="p-6 text-center">
                        <h3 class="font-bold text-lg text-gray-800 mb-2 min-h-[3.5rem] flex items-center justify-center leading-tight">${product.name}</h3>
                        <p class="text-sm text-gray-500 mb-3 font-medium">نیم کیلو</p>
                        <div class="text-2xl font-black text-red-600 mb-4">${formatPrice(product.price)} تومان</div>
                        <button onclick="addToCart(${product.id})" class="w-full btn-secondary text-white py-3 px-4 rounded-xl font-bold transition-all duration-300 flex items-center justify-center gap-2">
                            <i class="fas fa-cart-plus"></i>
                            افزودن به سبد
                        </button>
                    </div>
                </div>
            `).join('');
        }



        // Cart functions
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            const existingItem = cart.find(item => item.id === productId);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ ...product, quantity: 1 });
            }
            
            updateCartBadge();
            saveCartToLocal();
            showNotification(`${product.name} به سبد خرید اضافه شد!`);
        }

        function updateCartBadge() {
            const badge = document.getElementById('cartBadge');
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            
            if (totalItems > 0) {
                badge.textContent = totalItems;
                badge.classList.remove('hidden');
            } else {
                badge.classList.add('hidden');
            }
        }

        function renderCartItems() {
            const cartItemsContainer = document.getElementById('cartItems');
            const cartTotal = document.getElementById('cartTotal');
            
            if (cart.length === 0) {
                cartItemsContainer.innerHTML = '<p class="text-center text-gray-500 py-8">سبد خرید شما خالی است</p>';
                cartTotal.textContent = '0 تومان';
                return;
            }
            
            cartItemsContainer.innerHTML = cart.map(item => `
                <div class="flex items-center justify-between bg-gray-50 p-4 rounded-lg">
                    <div class="flex items-center gap-4">
                        <span class="text-2xl">${item.emoji}</span>
                        <div>
                            <h4 class="font-bold text-gray-800">${item.name}</h4>
                            <p class="text-gray-600">${formatPrice(item.price)} تومان</p>
                        </div>
                    </div>
                    <div class="flex items-center gap-3">
                        <button onclick="updateCartQuantity(${item.id}, -1)" class="w-8 h-8 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600">
                            <i class="fas fa-minus text-xs"></i>
                        </button>
                        <span class="font-bold text-lg w-8 text-center">${item.quantity}</span>
                        <button onclick="updateCartQuantity(${item.id}, 1)" class="w-8 h-8 bg-green-500 text-white rounded-full flex items-center justify-center hover:bg-green-600">
                            <i class="fas fa-plus text-xs"></i>
                        </button>
                        <button onclick="removeFromCart(${item.id})" class="w-8 h-8 bg-gray-500 text-white rounded-full flex items-center justify-center hover:bg-gray-600 mr-2">
                            <i class="fas fa-trash text-xs"></i>
                        </button>
                    </div>
                </div>
            `).join('');
            
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            cartTotal.textContent = formatPrice(total) + ' تومان';
        }

        function updateCartQuantity(productId, change) {
            const item = cart.find(item => item.id === productId);
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) {
                    removeFromCart(productId);
                } else {
                    updateCartBadge();
                    renderCartItems();
                    saveCartToLocal();
                }
            }
        }

        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            updateCartBadge();
            renderCartItems();
            saveCartToLocal();
        }

        function clearCart() {
            cart = [];
            updateCartBadge();
            renderCartItems();
            saveCartToLocal();
            showNotification('سبد خرید پاک شد');
        }





        // PWA functions
        function setupPWA() {
            // Listen for the beforeinstallprompt event
            window.addEventListener('beforeinstallprompt', (e) => {
                // Prevent the mini-infobar from appearing on mobile
                e.preventDefault();
                // Stash the event so it can be triggered later
                deferredPrompt = e;
                // Show the install button
                document.getElementById('installAppBtn').classList.remove('hidden');
            });

            // Handle the install button click
            document.getElementById('installAppBtn').addEventListener('click', async () => {
                if (deferredPrompt) {
                    // Show the install prompt
                    deferredPrompt.prompt();
                    // Wait for the user to respond to the prompt
                    const { outcome } = await deferredPrompt.userChoice;
                    
                    if (outcome === 'accepted') {
                        showNotification('اپلیکیشن با موفقیت نصب شد!');
                    } else {
                        showNotification('نصب اپلیکیشن لغو شد');
                    }
                    
                    // Clear the deferredPrompt
                    deferredPrompt = null;
                    // Hide the install button
                    document.getElementById('installAppBtn').classList.add('hidden');
                }
            });

            // Listen for the appinstalled event
            window.addEventListener('appinstalled', () => {
                showNotification('اپلیکیشن با موفقیت نصب شد! حالا می‌تونید از صفحه اصلی استفاده کنید.');
                document.getElementById('installAppBtn').classList.add('hidden');
            });

            // Check if app is already installed
            if (window.matchMedia('(display-mode: standalone)').matches) {
                document.getElementById('installAppBtn').classList.add('hidden');
            }
        }

        // Event listeners setup
        function setupEventListeners() {
            // Mobile menu
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            const mobileMenu = document.getElementById('mobileMenu');
            const mobileMenuOverlay = document.getElementById('mobileMenuOverlay');
            const closeMobileMenu = document.getElementById('closeMobileMenu');

            function openMobileMenu() {
                mobileMenu.classList.add('active');
                mobileMenuOverlay.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
            }

            function closeMobileMenuFunc() {
                mobileMenu.classList.remove('active');
                mobileMenuOverlay.classList.add('hidden');
                document.body.style.overflow = 'auto';
            }

            mobileMenuBtn.addEventListener('click', openMobileMenu);
            closeMobileMenu.addEventListener('click', closeMobileMenuFunc);
            mobileMenuOverlay.addEventListener('click', closeMobileMenuFunc);

            // Cart modal
            const cartBtn = document.getElementById('cartBtn');
            const cartModal = document.getElementById('cartModal');
            const closeCartModal = document.getElementById('closeCartModal');

            cartBtn.addEventListener('click', () => {
                renderCartItems();
                cartModal.classList.remove('hidden');
                cartModal.classList.add('flex');
                document.body.style.overflow = 'hidden';
            });

            closeCartModal.addEventListener('click', () => {
                cartModal.classList.add('hidden');
                cartModal.classList.remove('flex');
                document.body.style.overflow = 'auto';
            });

            // Cart actions
            document.getElementById('clearCartBtn').addEventListener('click', clearCart);
            document.getElementById('checkoutBtn').addEventListener('click', () => {
                if (cart.length === 0) {
                    showNotification('سبد خرید شما خالی است!', 'error');
                    return;
                }
                
                // Close cart modal and open order form
                cartModal.classList.add('hidden');
                cartModal.classList.remove('flex');
                openOrderForm();
            });

            // Order form event listeners
            setupOrderFormListeners();
            
            // Update SEO structured data
            updateStructuredData();

            // Filter buttons
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.filter-btn').forEach(b => {
                        b.classList.remove('active', 'bg-red-600', 'text-white');
                        b.classList.add('bg-gray-200', 'text-gray-700');
                    });
                    
                    this.classList.add('active', 'bg-red-600', 'text-white');
                    this.classList.remove('bg-gray-200', 'text-gray-700');
                    
                    currentFilter = this.dataset.filter;
                    saveFilterToLocal();
                    renderProducts();
                });
            });

    



            // Hero buttons
            document.getElementById('viewProductsBtn').addEventListener('click', () => {
                document.getElementById('products').scrollIntoView({ behavior: 'smooth' });
            });

            document.getElementById('aboutUsBtn').addEventListener('click', () => {
                document.getElementById('about').scrollIntoView({ behavior: 'smooth' });
            });



            // Social media buttons
            document.querySelectorAll('.social-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const social = this.dataset.social;
                    switch(social) {
                        case 'telegram':
                            showNotification('به زودی در تلگرام!');
                            break;
                        case 'instagram':
                            showNotification('به زودی در اینستاگرام!');
                            break;
                        case 'whatsapp':
                            showNotification('به زودی در واتساپ!');
                            break;
                    }
                });
            });

            // Smooth scrolling for navigation links
            document.querySelectorAll('.nav-link, .mobile-nav-link, .footer-link').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const href = this.getAttribute('href');
                    if (href.startsWith('#')) {
                        const target = document.querySelector(href);
                        if (target) {
                            target.scrollIntoView({
                                behavior: 'smooth',
                                block: 'start'
                            });
                            closeMobileMenuFunc();
                        }
                    } else {
                        showNotification('این بخش به زودی اضافه می‌شود!');
                    }
                });
            });

            // Modal close on outside click
            document.getElementById('adminPanelModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeAdminPanel();
                }
            });
        }

        // Scroll effects
        window.addEventListener('scroll', function() {
            const scrolled = window.pageYOffset;
            const parallax = document.querySelector('.hero-pattern');
            if (parallax) {
                parallax.style.transform = `translateY(${scrolled * 0.5}px)`;
            }
        });

        // Order form functions
        function openOrderForm() {
            // Populate order summary
            renderOrderSummary();
            
            // Show the modal
            document.getElementById('orderFormModal').classList.remove('hidden');
            document.getElementById('orderFormModal').classList.add('flex');
            document.body.style.overflow = 'hidden';
            
            // Focus on first input
            document.getElementById('customerName').focus();
        }

        function closeOrderForm() {
            document.getElementById('orderFormModal').classList.add('hidden');
            document.getElementById('orderFormModal').classList.remove('flex');
            document.body.style.overflow = 'auto';
            
            // Clear form
            document.getElementById('customerOrderForm').reset();
        }

        function renderOrderSummary() {
            const orderSummary = document.getElementById('orderSummary');
            const orderTotalAmount = document.getElementById('orderTotalAmount');
            
            if (cart.length === 0) {
                orderSummary.innerHTML = '<p class="text-gray-500">سبد خرید خالی است</p>';
                orderTotalAmount.textContent = '0 تومان';
                return;
            }
            
            orderSummary.innerHTML = cart.map(item => `
                <div class="flex justify-between items-center py-1">
                    <div class="flex items-center gap-2">
                        <span>${item.emoji}</span>
                        <span class="font-medium">${item.name}</span>
                        <span class="text-gray-500">× ${item.quantity}</span>
                    </div>
                    <span class="font-bold text-red-600">${formatPrice(item.price * item.quantity)} تومان</span>
                </div>
            `).join('');
            
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            orderTotalAmount.textContent = formatPrice(total) + ' تومان';
        }

        function generateOrderNumber() {
            const timestamp = Date.now();
            const random = Math.floor(Math.random() * 1000);
            return `${timestamp.toString().slice(-6)}${random.toString().padStart(3, '0')}`;
        }

        function generateOrderMessage(customerData, orderNumber) {
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const orderDate = new Date().toLocaleDateString('fa-IR');
            const orderTime = new Date().toLocaleTimeString('fa-IR');
            
            let message = `🏠 سفارش جدید خونه سوسیس - شماره #${orderNumber}\n\n`;
            message += `👤 مشخصات مشتری:\n`;
            message += `• نام: ${customerData.name}\n`;
            message += `• تلفن: ${customerData.phone}\n`;
            message += `• آدرس: ${customerData.address}\n`;
            if (customerData.notes) {
                message += `• توضیحات: ${customerData.notes}\n`;
            }
            message += `\n📦 جزئیات سفارش:\n`;
            
            cart.forEach((item, index) => {
                message += `${index + 1}. ${item.name}\n`;
                message += `   • تعداد: ${item.quantity} عدد\n`;
                message += `   • قیمت واحد: ${formatPrice(item.price)} تومان\n`;
                message += `   • جمع: ${formatPrice(item.price * item.quantity)} تومان\n\n`;
            });
            
            message += `💰 مجموع کل: ${formatPrice(total)} تومان\n`;
            message += `📅 تاریخ سفارش: ${orderDate} - ${orderTime}\n\n`;
            message += `🌭 این سفارش از طریق وب‌سایت خونه سوسیس ثبت شده است.`;
            
            return message;
        }

        function saveOrderToLocal(orderData) {
            try {
                const orders = loadFromLocalStorage('sausage_house_orders', []);
                orders.unshift(orderData); // Add to beginning of array
                
                // Keep only last 50 orders
                if (orders.length > 50) {
                    orders.splice(50);
                }
                
                saveToLocalStorage('sausage_house_orders', orders);
                return true;
            } catch (error) {
                console.error('Error saving order:', error);
                return false;
            }
        }

        function setupOrderFormListeners() {
            // Close order form
            document.getElementById('closeOrderForm').addEventListener('click', closeOrderForm);
            document.getElementById('cancelOrder').addEventListener('click', closeOrderForm);
            
            // Form submission
            document.getElementById('customerOrderForm').addEventListener('submit', async function(e) {
                e.preventDefault();
                
                if (cart.length === 0) {
                    showNotification('سبد خرید شما خالی است!', 'error');
                    return;
                }
                
                // Get form data
                const customerData = {
                    name: document.getElementById('customerName').value.trim(),
                    phone: document.getElementById('customerPhone').value.trim(),
                    address: document.getElementById('customerAddress').value.trim(),
                    notes: document.getElementById('customerNotes').value.trim()
                };
                
                // Validate required fields
                if (!customerData.name || !customerData.phone || !customerData.address) {
                    showNotification('لطفاً تمام فیلدهای ضروری را پر کنید!', 'error');
                    return;
                }
                
                // Validate phone number (basic validation)
                const phoneRegex = /^09\d{9}$/;
                if (!phoneRegex.test(customerData.phone)) {
                    showNotification('شماره تلفن باید با 09 شروع شده و 11 رقم باشد!', 'error');
                    document.getElementById('customerPhone').focus();
                    return;
                }
                
                // Show loading state
                const submitBtn = document.querySelector('#customerOrderForm button[type="submit"]');
                const originalText = submitBtn.innerHTML;
                submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin ml-2"></i>در حال ارسال...';
                submitBtn.disabled = true;
                
                try {
                    // Generate order number
                    const orderNumber = generateOrderNumber();
                    
                    // Create order object
                    const orderData = {
                        orderNumber: orderNumber,
                        customer: customerData,
                        items: [...cart],
                        total: cart.reduce((sum, item) => sum + (item.price * item.quantity), 0),
                        date: new Date().toISOString(),
                        status: 'pending'
                    };
                    
                    // Save order locally first
                    saveOrderToLocal(orderData);
                    
                    // Generate message for automatic sending
                    const orderMessage = generateOrderMessage(customerData, orderNumber);
                    
                    // Send order automatically
                    const success = await sendOrderAutomatically(orderMessage, orderData);
                    
                    if (success) {
                        // Store order info for success modal
                        sessionStorage.setItem('lastOrderMessage', orderMessage);
                        sessionStorage.setItem('lastOrderNumber', orderNumber);
                        
                        // Close order form
                        closeOrderForm();
                        
                        // Show success modal
                        showOrderSuccess(orderNumber);
                        
                        // Clear cart
                        clearCart();
                        
                        showNotification('سفارش ثبت و ارسال شد! کارشناسان ما با شما تماس خواهند گرفت 🎉');
                    } else {
                        throw new Error('خطا در ارسال سفارش');
                    }
                    
                } catch (error) {
                    console.error('Order submission error:', error);
                    showNotification('خطا در ارسال سفارش! لطفاً دوباره تلاش کنید.', 'error');
                } finally {
                    // Reset button state
                    submitBtn.innerHTML = originalText;
                    submitBtn.disabled = false;
                }
            });
            
            // Order success modal listeners
            document.getElementById('closeOrderSuccess').addEventListener('click', closeOrderSuccess);
            document.getElementById('viewOrderDetails').addEventListener('click', function() {
                const orderMessage = sessionStorage.getItem('lastOrderMessage');
                if (orderMessage) {
                    showOrderDetails(orderMessage);
                }
            });
            
            // Phone number formatting
            document.getElementById('customerPhone').addEventListener('input', function(e) {
                let value = e.target.value.replace(/\D/g, ''); // Remove non-digits
                if (value.length > 11) {
                    value = value.slice(0, 11);
                }
                e.target.value = value;
            });
            
            // Real-time form validation
            const requiredFields = ['customerName', 'customerPhone', 'customerAddress'];
            requiredFields.forEach(fieldId => {
                document.getElementById(fieldId).addEventListener('blur', function() {
                    if (!this.value.trim()) {
                        this.style.borderColor = '#ef4444';
                        this.style.backgroundColor = '#fef2f2';
                    } else {
                        this.style.borderColor = '#d1d5db';
                        this.style.backgroundColor = '#ffffff';
                    }
                });
                
                document.getElementById(fieldId).addEventListener('input', function() {
                    if (this.value.trim()) {
                        this.style.borderColor = '#10b981';
                        this.style.backgroundColor = '#f0fdf4';
                    }
                });
            });
        }

        function showOrderSuccess(orderNumber) {
            document.getElementById('orderNumber').textContent = `#${orderNumber}`;
            document.getElementById('orderSuccessModal').classList.remove('hidden');
            document.getElementById('orderSuccessModal').classList.add('flex');
            document.body.style.overflow = 'hidden';
        }

        function closeOrderSuccess() {
            document.getElementById('orderSuccessModal').classList.add('hidden');
            document.getElementById('orderSuccessModal').classList.remove('flex');
            document.body.style.overflow = 'auto';
        }

        function showOrderDetails(orderMessage) {
            // Create a modal to show order details
            const detailsModal = document.createElement('div');
            detailsModal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            detailsModal.innerHTML = `
                <div class="glass-effect bg-white rounded-2xl p-6 w-full max-w-2xl mx-4 shadow-2xl max-h-[80vh] overflow-y-auto">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-2xl font-bold text-gray-800">📋 جزئیات سفارش</h3>
                        <button class="close-details text-gray-500 hover:text-gray-700 text-2xl">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="bg-gray-50 rounded-xl p-4 mb-6 border">
                        <pre class="whitespace-pre-wrap font-medium text-sm text-gray-800 leading-relaxed">${orderMessage}</pre>
                    </div>
                    
                    <div class="flex gap-3">
                        <button class="share-telegram flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-xl font-bold">
                            <i class="fab fa-telegram ml-2"></i>
                            تلگرام
                        </button>
                        <button class="copy-order flex-1 bg-green-600 hover:bg-green-700 text-white py-3 rounded-xl font-bold">
                            <i class="fas fa-copy ml-2"></i>
                            کپی
                        </button>
                        <button class="close-details bg-gray-300 hover:bg-gray-400 text-gray-700 px-4 py-3 rounded-xl font-bold">
                            بستن
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(detailsModal);
            document.body.style.overflow = 'hidden';
            
            // Event listeners for the modal
            detailsModal.querySelectorAll('.close-details').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.body.removeChild(detailsModal);
                    document.body.style.overflow = 'auto';
                });
            });
            
            detailsModal.querySelector('.share-telegram').addEventListener('click', () => {
                const telegramUrl = `https://t.me/share/url?url=${encodeURIComponent('سفارش جدید خونه سوسیس:')}&text=${encodeURIComponent(orderMessage)}`;
                window.open(telegramUrl, '_blank');
            });
            
            detailsModal.querySelector('.copy-order').addEventListener('click', () => {
                navigator.clipboard.writeText(orderMessage).then(() => {
                    showNotification('متن سفارش کپی شد! 📋');
                }).catch(() => {
                    showNotification('خطا در کپی کردن متن', 'error');
                });
            });
            
            // Close on outside click
            detailsModal.addEventListener('click', (e) => {
                if (e.target === detailsModal) {
                    document.body.removeChild(detailsModal);
                    document.body.style.overflow = 'auto';
                }
            });
        }

        // Automatic order sending function - sends directly to Telegram
        async function sendOrderAutomatically(orderMessage, orderData) {
            try {
                console.log('🚀 Sending order automatically to Telegram...');
                
                // Method 1: Direct Telegram Bot API (REAL SENDING)
                const telegramSuccess = await sendViaTelegramBot(orderMessage, orderData);
                
                // Method 2: Show business notification popup (IMMEDIATE)
                showBusinessNotification(orderData);
                
                if (telegramSuccess) {
                    console.log('✅ Order sent successfully via Telegram');
                    return true;
                } else {
                    console.log('⚠️ Telegram method failed, using fallback');
                    // Fallback to direct user methods
                    return await sendOrderFallback(orderMessage, orderData);
                }
                
            } catch (error) {
                console.error('Error in automatic order sending:', error);
                return await sendOrderFallback(orderMessage, orderData);
            }
        }

        // Telegram Bot API integration - REAL SENDING with your bot token!
        async function sendViaTelegramBot(message, orderData) {
            try {
                console.log('🤖 Sending order to Telegram...');
                
                // Your actual bot token
                const TELEGRAM_BOT_TOKEN = '8259325026:AAGnl981QZNGivVckUJvutRr556rN19dX9w';
                
                // First, try to get your chat ID by checking recent updates
                let chatId = null;
                
                try {
                    const updatesResponse = await fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/getUpdates`);
                    if (updatesResponse.ok) {
                        const updates = await updatesResponse.json();
                        if (updates.result && updates.result.length > 0) {
                            // Get the most recent chat ID (yours)
                            const lastUpdate = updates.result[updates.result.length - 1];
                            chatId = lastUpdate.message?.chat?.id || lastUpdate.callback_query?.from?.id;
                            console.log('Found chat ID:', chatId);
                        }
                    }
                } catch (e) {
                    console.log('Could not get chat ID from updates');
                }
                
                // If we have a chat ID, try to send directly
                if (chatId) {
                    try {
                        const telegramPayload = {
                            chat_id: chatId,
                            text: `🏠 *سفارش جدید خونه سوسیس*\n\n${message}`,
                            parse_mode: 'Markdown'
                        };
                        
                        const response = await fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(telegramPayload)
                        });
                        
                        if (response.ok) {
                            const result = await response.json();
                            console.log('✅ Telegram direct send success:', result);
                            showNotification('سفارش به تلگرام شما ارسال شد! 🤖');
                            return true;
                        } else {
                            const error = await response.json();
                            console.log('❌ Telegram direct send failed:', error);
                        }
                    } catch (error) {
                        console.log('Direct send error:', error);
                    }
                }
                
                // If direct API failed, open Telegram share
                console.log('Opening Telegram share...');
                const telegramShareUrl = `https://t.me/share/url?url=${encodeURIComponent('سفارش جدید خونه سوسیس')}&text=${encodeURIComponent(message)}`;
                
                // Try to open in new window
                const telegramWindow = window.open(telegramShareUrl, '_blank', 'width=600,height=400');
                
                if (telegramWindow) {
                    showNotification('تلگرام باز شد! پیام آماده ارسال است 📱');
                    
                    // Check if window was closed (user completed action)
                    const checkClosed = setInterval(() => {
                        if (telegramWindow.closed) {
                            clearInterval(checkClosed);
                            showNotification('سفارش از طریق تلگرام ارسال شد! ✅');
                        }
                    }, 1000);
                    
                    // Auto-close check after 30 seconds
                    setTimeout(() => {
                        clearInterval(checkClosed);
                        if (!telegramWindow.closed) {
                            telegramWindow.close();
                        }
                    }, 30000);
                    
                    return true;
                } else {
                    // Popup blocked, try redirect
                    window.location.href = telegramShareUrl;
                    return true;
                }
                
            } catch (error) {
                console.log('Telegram error:', error);
                
                // Ultimate fallback: copy message and show instructions
                try {
                    await navigator.clipboard.writeText(message);
                    showNotification('متن کپی شد! لطفاً در تلگرام به خودتان ارسال کنید 📋');
                    return true;
                } catch (clipError) {
                    showNotification('لطفاً سفارش را دستی در تلگرام ثبت کنید', 'error');
                    return false;
                }
            }
        }

        // Fallback method when Telegram fails
        async function sendOrderFallback(message, orderData) {
            try {
                console.log('🔄 Using fallback methods...');
                
                // Method 1: Copy to clipboard and show instructions
                try {
                    await navigator.clipboard.writeText(message);
                    showNotification('متن سفارش کپی شد! لطفاً در تلگرام به خودتان ارسال کنید 📋');
                    return true;
                } catch (clipError) {
                    // Method 2: Show alert with message
                    alert(`سفارش ثبت شد! لطفاً این پیام را در تلگرام به خودتان ارسال کنید:\n\n${message}`);
                    return true;
                }
                
            } catch (error) {
                console.error('Fallback methods failed:', error);
                return false;
            }
        }
        
        function showBusinessNotification(orderData) {
            // Create a prominent business notification popup
            const businessNotification = document.createElement('div');
            businessNotification.className = 'fixed top-4 right-4 z-[9999] bg-blue-600 text-white p-6 rounded-2xl shadow-2xl max-w-sm animate-bounce';
            businessNotification.innerHTML = `
                <div class="flex items-start gap-4">
                    <div class="text-3xl">🤖</div>
                    <div class="flex-1">
                        <h3 class="font-bold text-lg mb-2">سفارش به تلگرام ارسال شد!</h3>
                        <div class="text-sm space-y-1">
                            <p><strong>شماره:</strong> #${orderData.orderNumber}</p>
                            <p><strong>مشتری:</strong> ${orderData.customer.name}</p>
                            <p><strong>تلفن:</strong> ${orderData.customer.phone}</p>
                            <p><strong>مبلغ:</strong> ${formatPrice(orderData.total)} تومان</p>
                        </div>
                        <div class="mt-3 flex gap-2">
                            <button onclick="this.parentElement.parentElement.parentElement.parentElement.remove()" 
                                    class="bg-white text-blue-600 px-3 py-1 rounded-lg text-xs font-bold">
                                بستن
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(businessNotification);
            
            // Auto remove after 15 seconds
            setTimeout(() => {
                if (businessNotification.parentElement) {
                    businessNotification.remove();
                }
            }, 15000);
            
            // Play notification sound (if possible)
            try {
                const audio = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT');
                audio.volume = 0.3;
                audio.play().catch(() => {
                    console.log('Could not play notification sound');
                });
            } catch (error) {
                console.log('Audio notification not supported');
            }
        }

        // SEO Functions
        function updateStructuredData() {
            // Update structured data with current products
            const structuredData = {
                "@context": "https://schema.org",
                "@type": "LocalBusiness",
                "name": "خونه سوسیس",
                "description": "تولیدکننده بهترین سوسیس، ژامبون و فرآورده‌های گوشتی با کیفیت بالا",
                "founder": {
                    "@type": "Person",
                    "name": "مرضیه حیدری"
                },
                "foundingDate": "2009",
                "address": {
                    "@type": "PostalAddress",
                    "addressLocality": "تهران",
                    "addressCountry": "IR"
                },
                "telephone": "+98-915-715-7629",
                "url": "https://sausage-house.com",
                "sameAs": [
                    "https://instagram.com/sausage_house",
                    "https://t.me/sausage_house"
                ],
                "hasOfferCatalog": {
                    "@type": "OfferCatalog",
                    "name": "محصولات خونه سوسیس",
                    "itemListElement": products.map(product => ({
                        "@type": "Offer",
                        "itemOffered": {
                            "@type": "Product",
                            "name": product.name,
                            "category": getCategoryName(product.category),
                            "offers": {
                                "@type": "Offer",
                                "price": product.price,
                                "priceCurrency": "IRR",
                                "availability": "https://schema.org/InStock"
                            },
                            "image": product.image || `data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>${product.emoji}</text></svg>`
                        }
                    }))
                }
            };
            
            // Update existing structured data script
            const existingScript = document.querySelector('script[type="application/ld+json"]');
            if (existingScript) {
                existingScript.textContent = JSON.stringify(structuredData, null, 2);
            }
        }
        
        function getCategoryName(category) {
            const categoryNames = {
                'sausage': 'سوسیس',
                'ham': 'ژامبون',
                'processed': 'فرآورده گوشتی'
            };
            return categoryNames[category] || 'فرآورده گوشتی';
        }
        
        function updatePageTitle() {
            const totalProducts = products.length;
            const categories = [...new Set(products.map(p => p.category))].length;
            document.title = `خونه سوسیس | ${totalProducts} محصول در ${categories} دسته‌بندی | بهترین کیفیت در ایران`;
        }
        
        function updateMetaDescription() {
            const productNames = products.slice(0, 5).map(p => p.name).join('، ');
            const description = `خونه سوسیس - تولیدکننده ${productNames} و سایر فرآورده‌های گوشتی با کیفیت بالا. ارسال رایگان به سراسر کشور. 15 سال تجربه.`;
            
            const metaDesc = document.querySelector('meta[name="description"]');
            if (metaDesc) {
                metaDesc.setAttribute('content', description);
            }
        }

        // Make functions globally available
        window.addToCart = addToCart;
        window.updateCartQuantity = updateCartQuantity;
        window.removeFromCart = removeFromCart;
        window.openOrderForm = openOrderForm;
        window.closeOrderForm = closeOrderForm;

        // Initialize app immediately
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, initializing app...');
            initializeApp();
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'979db248028261fb',t:'MTc1Njk5MTEwNS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
